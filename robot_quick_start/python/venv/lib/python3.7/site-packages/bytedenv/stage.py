# coding: utf-8
from __future__ import absolute_import, division, print_function, unicode_literals

import os

from .callcache import callcache

UNKNOWN_STAGE = '-'
STAGE_STAGING = 'staging'
STAGE_CANARY = 'canary'
STAGE_SINGLE_DC = 'single_dc'
STAGE_ALL_DC = 'all_dc'


@callcache
def in_tce():  # type: () -> bool
    """If run in tce environment.

    :returns: True or False
    :rtype: bool
    """
    return os.environ.get('IS_TCE_DOCKER_ENV') == '1'


@callcache
def get_stage():  # type: () -> str
    """Get current stage.

    :returns: stage
    :rtype: str
    """
    if in_tce():
        if os.environ.get('TCE_STAGE'):
            return os.environ.get('TCE_STAGE')
    return UNKNOWN_STAGE
