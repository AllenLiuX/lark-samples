# coding: utf-8

from __future__ import absolute_import
from __future__ import division
from __future__ import print_function
from __future__ import unicode_literals

import multiprocessing
from .context import global_context

class Process(multiprocessing.Process):

    def __init__(self, *args, **kwargs):
        self._context_store = getattr(global_context.thread_local, "store", {})
        super(Process, self).__init__(*args, **kwargs)

    def _bootstrap(self, *args, **kwargs):
        if self._context_store:
            global_context.thread_local.store = self._context_store
        return super(Process, self)._bootstrap(*args, **kwargs)
    


